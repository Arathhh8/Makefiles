# Makefiles

The Makefile utility automatically determines which pieces of a large program need to be recompiled, and issues commands to recompile them.

Once a suitable makefile exists, each time you change source files, this simple shell command:

    make

sufficies to perform all necessary recompilations. The _make_ program uses the makefile data base and the last-modification times of the files to decide which of the files need to be updated. For each of those files, it issues the recipes recorded in the data base.

## GETTING STARTED

You need a file called a makefile to tell _make_ what to do. Most often, the makefiles tells _make_ how to compile and link a program.

When _make_ recompiles the editor, each changed C source file must be recompiled. If a header files has changed, each C source file that includes the header file must be recompiled to be safe. Each compilation produces an object file corresponding to the source file. Finally, if any source file has been recompiled, all the object files, whether newly made or saved from previous compilations, must be linked together to produce the new executable editor.

### What a Rule Looks Like

A simple makefile consists of "rules" with the following shape:

    target ... : prerequisites ...
            recipe
            ...
            ...

A ***target*** is usually the name of a file that is generated by a program; examples of targets are executable or object files. A target can also be the name of an action to carry out, such as 'clen'.

A ***prerequisite*** is a file that is used as input to create the target. A target often depends on serveal files.

A ***recipe*** is an action that _make_ carries out. A recipe may have more than one command, either on the same line or each on its own line. 

Usually a _recipe_ is in a _rule_ with _prerequisites_ and serves to create a target file if any of the prerequisites change. However, the rule that specifies a recipe for the target need not have prerequisites.

A ***rule***, then, explains how and when to remake certain files which are targets of the particular rule. _make_ carries out the recipe on the prerequisites to create or update the target. A rule can also explain how and when to carry out an action.

### What Makefiles Contain

Makefiles contain five kinds of things: explicit rules, implicit rules, variable definitions, directives, and comments.

1. An _explicit rule_  says when and how to remake one or more files, called the rule's targets. it list the other files that the target depend on, called the _prerequisites_ of the target, and may also give a _recipe_ to use to create or update the targets.

2. An _implicit rule_ says when and how to remake a class of files based on their names. It describes how a target may depend on a file with a name similar to the target and gives a recipe to create or update such a target.

3. A _variable definition_ is a line that specifies a text string value for a variable that can be substituted into the text later. The simple makefile example shows a variable definition for objects as a list of all object files.

4. A _directive_ is an instruction for make to do something special while reading the makefile. These include:
    - Reading another makefile..
    - Deciding (based on the values of variables) whether to use or ignore a part of the makefile.
    - Defining a variable from a verbatim string containing multiple lines.

5. ‘#’ in a line of a makefile starts a _comment_. It and the rest of the line are ignored, except that a trailing backslash not escaped by another backslash will continue the comment across multiple lines.

#### What Name to Give Your Makefile

By default, when _make_ looks fot the makefile, it tries the following names, in order: ***GNUmakefile***, ***makefile*** and ***Makefile***.

By recomendation you should call your makefile either ***makefile*** or ***Makefile***. **Makefile** is mostly used.
